# YLab task-6

## Задача

На странице товара добавить пользовательские комментарии.

Комментарии отображаются сразу все в виде иерархии. В каждом комментарии имя автора, дата, текст и ссылка для ответа на комментарий.

Ответить или написать новый комментарий может только авторизованный пользователь. Для неавторизованного вывести текст “Войдите, чтобы иметь возможность комментировать”.

Форма для написания нового комментария показывается в самом низу под всеми комментариями. А форма ответа на комментарий под соответствующем комментарием. Одновременно отображается только одна форма.

Комментарии выбираются из АПИ, в поле parent указывается id товара, который комментируется, чьи комментарии хотим выбрать.

Для создания нового комментария в parent указывается id товара. Но если создаётся ответ на другой комментарий, то в parent указывается идентификатор комментария, на который отвечаем.

В качестве внешнего состояния использовать redux. (подготовленный в коде). Всё переписывать на redux не надо.

## Дополнительное задание

Логику с мультиязычностью перенести в новый сервис I18n. Функция translate будет методом сервиса. Если ей не передавать в аргументах код языка, то используется текущий код языка в сервисе мультиязычности. Текущий код языка (локаль) тоже должен храниться в сервисе мультиязычности. По сути код языка будет состоянием сервиса. Тем самым отказываемся от использования и store и провайдера для хранения кода языка. Придется изменить интеграцию с компонентами - в хуке useTranslate отслеживать изменение кода языка в сервисе мультиязычности, а не в store/провайдере. В хуке useTranslate доступ к сервису мультиязычности реализуется хуком useServices.

Данные на сервере поддерживают мультиязычность. Если в апи запросах указать код языка заголовком Accept-Languages по стандарту или в X-Lang, то вернуться тексты на указанном языке (есть русский и английский). Необходимо добавить взаимосвязь между сервисом мультиязычности и сервисом АПИ. Непонятно только, либо сервис мультиязычности устанавливает заголовок в сервисе АПИ при смене у себя кода языка. Либо сервис АПИ отслеживает смену языка в сервисе мультиязычности и у себя сам меняет заголовок Accept-Languages. В ответе на задачу объяснить своё решение.
